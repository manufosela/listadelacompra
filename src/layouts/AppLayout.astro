---
import BaseLayout from './BaseLayout.astro';
import AuthGuard from '../components/AuthGuard.astro';
import Header from '../components/Header.astro';
import Navigation from '../components/Navigation.astro';

interface Props {
  title: string;
}

const { title } = Astro.props;
const currentYear = new Date().getFullYear();
---

<BaseLayout title={title}>
  <AuthGuard>
    <div class="app-container">
      <Header />
      <Navigation />
      <main class="app-main">
        <slot />
      </main>
      <footer class="app-footer">
        <p>&copy; {currentYear} MyHomeCart - by <a href="https://github.com/manufosela" target="_blank" rel="noopener">@manufosela</a></p>
      </footer>
    </div>
  </AuthGuard>
</BaseLayout>

<style>
  .app-container {
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    width: 100%;
    overflow-x: hidden;
  }

  .app-main {
    flex: 1;
    padding: var(--space-md);
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;
  }

  .app-footer {
    padding: var(--space-md) var(--space-lg);
    text-align: center;
    font-size: var(--font-size-sm);
    color: var(--color-text-secondary);
    border-top: 1px solid var(--color-border);
    background: var(--color-bg);
    margin-bottom: 60px; /* Space for mobile nav */
    box-sizing: border-box;
  }

  .app-footer a {
    color: var(--color-primary);
    text-decoration: none;
  }

  .app-footer a:hover {
    text-decoration: underline;
  }

  @media (min-width: 768px) {
    .app-main {
      margin-left: 240px;
      padding: var(--space-lg);
      width: calc(100% - 240px);
      max-width: calc(100% - 240px);
    }

    .app-footer {
      margin-left: 240px;
      width: calc(100% - 240px);
      margin-bottom: 0;
    }
  }
</style>
